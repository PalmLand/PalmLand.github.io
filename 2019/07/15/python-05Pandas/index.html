<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Python-05Pandas | PalmLand</title><meta name="description" content="Python-05Pandas"><meta name="keywords" content="python"><meta name="author" content="PalmLand"><meta name="copyright" content="PalmLand"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/bitbug_favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Python-05Pandas"><meta name="twitter:description" content="Python-05Pandas"><meta name="twitter:image" content="https://palmland.github.io/img/0000.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Python-05Pandas"><meta property="og:url" content="https://palmland.github.io/2019/07/15/python-05Pandas/"><meta property="og:site_name" content="PalmLand"><meta property="og:description" content="Python-05Pandas"><meta property="og:image" content="https://palmland.github.io/img/0000.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://palmland.github.io/2019/07/15/python-05Pandas/"><link rel="prev" title="Python-06Matplotlib" href="https://palmland.github.io/2019/07/16/python-06Matplotlib/"><link rel="next" title="Python-04Numpy" href="https://palmland.github.io/2019/07/14/python-04Numpy/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">PalmLand</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> Search</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/me.jpeg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">2</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#一、基本介绍"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">一、基本介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Series"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text">Series</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#DataFrame"><span class="toc_mobile_items-number">1.0.2.</span> <span class="toc_mobile_items-text">DataFrame</span></a></li></ol></li></ol><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#二、选择数据"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">二、选择数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#简单的筛选"><span class="toc_mobile_items-number">2.0.1.</span> <span class="toc_mobile_items-text">简单的筛选</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#根据标签-loc"><span class="toc_mobile_items-number">2.0.2.</span> <span class="toc_mobile_items-text">根据标签 loc</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#根据序列-iloc"><span class="toc_mobile_items-number">2.0.3.</span> <span class="toc_mobile_items-text">根据序列 iloc</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#混合选择-ix"><span class="toc_mobile_items-number">2.0.4.</span> <span class="toc_mobile_items-text">混合选择 ix</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#通过判断的筛选"><span class="toc_mobile_items-number">2.0.5.</span> <span class="toc_mobile_items-text">通过判断的筛选</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#三、设置值"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">三、设置值</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建数据"><span class="toc_mobile_items-number">3.0.1.</span> <span class="toc_mobile_items-text">创建数据</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#根据条件设置"><span class="toc_mobile_items-number">3.0.2.</span> <span class="toc_mobile_items-text">根据条件设置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#按行或列设置"><span class="toc_mobile_items-number">3.0.3.</span> <span class="toc_mobile_items-text">按行或列设置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#添加数据"><span class="toc_mobile_items-number">3.0.4.</span> <span class="toc_mobile_items-text">添加数据</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#四、处理丢失数据"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">四、处理丢失数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建含-NaN-的矩阵"><span class="toc_mobile_items-number">4.0.1.</span> <span class="toc_mobile_items-text">创建含 NaN 的矩阵</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#pd-dropna"><span class="toc_mobile_items-number">4.0.2.</span> <span class="toc_mobile_items-text">pd.dropna()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#pd-fillna"><span class="toc_mobile_items-number">4.0.3.</span> <span class="toc_mobile_items-text">pd.fillna()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#pd-isnull"><span class="toc_mobile_items-number">4.0.4.</span> <span class="toc_mobile_items-text">pd.isnull()</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#五、导入导出"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">五、导入导出</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#读取csv"><span class="toc_mobile_items-number">5.0.1.</span> <span class="toc_mobile_items-text">读取csv</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#将资料存取成其他格式"><span class="toc_mobile_items-number">5.0.2.</span> <span class="toc_mobile_items-text">将资料存取成其他格式</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#六、合并-concat"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">六、合并 concat</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#axis-合并方向"><span class="toc_mobile_items-number">6.0.1.</span> <span class="toc_mobile_items-text">axis(合并方向)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#ignore-index-重置-index"><span class="toc_mobile_items-number">6.0.2.</span> <span class="toc_mobile_items-text">ignore_index(重置 index)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#join-合并方式"><span class="toc_mobile_items-number">6.0.3.</span> <span class="toc_mobile_items-text">join(合并方式)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#join-axes-依照-axes-合并"><span class="toc_mobile_items-number">6.0.4.</span> <span class="toc_mobile_items-text">join_axes(依照 axes 合并)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#append-添加数据"><span class="toc_mobile_items-number">6.0.5.</span> <span class="toc_mobile_items-text">append(添加数据)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#七、合并merge"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">七、合并merge</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#依据一组key合并"><span class="toc_mobile_items-number">7.0.1.</span> <span class="toc_mobile_items-text">依据一组key合并</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#依据两组key合并"><span class="toc_mobile_items-number">7.0.2.</span> <span class="toc_mobile_items-text">依据两组key合并</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Indicator"><span class="toc_mobile_items-number">7.0.3.</span> <span class="toc_mobile_items-text">Indicator</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#依据index合并"><span class="toc_mobile_items-number">7.0.4.</span> <span class="toc_mobile_items-text">依据index合并</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#解决overlapping的问题"><span class="toc_mobile_items-number">7.0.5.</span> <span class="toc_mobile_items-text">解决overlapping的问题</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#八、plot出图"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">八、plot出图</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建一个Series"><span class="toc_mobile_items-number">8.0.1.</span> <span class="toc_mobile_items-text">创建一个Series</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Dataframe-可视化"><span class="toc_mobile_items-number">8.0.2.</span> <span class="toc_mobile_items-text">Dataframe 可视化</span></a></li></ol></li></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、基本介绍"><span class="toc-number">1.</span> <span class="toc-text">一、基本介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Series"><span class="toc-number">1.0.1.</span> <span class="toc-text">Series</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DataFrame"><span class="toc-number">1.0.2.</span> <span class="toc-text">DataFrame</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#二、选择数据"><span class="toc-number">2.</span> <span class="toc-text">二、选择数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单的筛选"><span class="toc-number">2.0.1.</span> <span class="toc-text">简单的筛选</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#根据标签-loc"><span class="toc-number">2.0.2.</span> <span class="toc-text">根据标签 loc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#根据序列-iloc"><span class="toc-number">2.0.3.</span> <span class="toc-text">根据序列 iloc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#混合选择-ix"><span class="toc-number">2.0.4.</span> <span class="toc-text">混合选择 ix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通过判断的筛选"><span class="toc-number">2.0.5.</span> <span class="toc-text">通过判断的筛选</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、设置值"><span class="toc-number">3.</span> <span class="toc-text">三、设置值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建数据"><span class="toc-number">3.0.1.</span> <span class="toc-text">创建数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#根据条件设置"><span class="toc-number">3.0.2.</span> <span class="toc-text">根据条件设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#按行或列设置"><span class="toc-number">3.0.3.</span> <span class="toc-text">按行或列设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加数据"><span class="toc-number">3.0.4.</span> <span class="toc-text">添加数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、处理丢失数据"><span class="toc-number">4.</span> <span class="toc-text">四、处理丢失数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建含-NaN-的矩阵"><span class="toc-number">4.0.1.</span> <span class="toc-text">创建含 NaN 的矩阵</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pd-dropna"><span class="toc-number">4.0.2.</span> <span class="toc-text">pd.dropna()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pd-fillna"><span class="toc-number">4.0.3.</span> <span class="toc-text">pd.fillna()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pd-isnull"><span class="toc-number">4.0.4.</span> <span class="toc-text">pd.isnull()</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、导入导出"><span class="toc-number">5.</span> <span class="toc-text">五、导入导出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#读取csv"><span class="toc-number">5.0.1.</span> <span class="toc-text">读取csv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将资料存取成其他格式"><span class="toc-number">5.0.2.</span> <span class="toc-text">将资料存取成其他格式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六、合并-concat"><span class="toc-number">6.</span> <span class="toc-text">六、合并 concat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#axis-合并方向"><span class="toc-number">6.0.1.</span> <span class="toc-text">axis(合并方向)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ignore-index-重置-index"><span class="toc-number">6.0.2.</span> <span class="toc-text">ignore_index(重置 index)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join-合并方式"><span class="toc-number">6.0.3.</span> <span class="toc-text">join(合并方式)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join-axes-依照-axes-合并"><span class="toc-number">6.0.4.</span> <span class="toc-text">join_axes(依照 axes 合并)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#append-添加数据"><span class="toc-number">6.0.5.</span> <span class="toc-text">append(添加数据)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#七、合并merge"><span class="toc-number">7.</span> <span class="toc-text">七、合并merge</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#依据一组key合并"><span class="toc-number">7.0.1.</span> <span class="toc-text">依据一组key合并</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#依据两组key合并"><span class="toc-number">7.0.2.</span> <span class="toc-text">依据两组key合并</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Indicator"><span class="toc-number">7.0.3.</span> <span class="toc-text">Indicator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#依据index合并"><span class="toc-number">7.0.4.</span> <span class="toc-text">依据index合并</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解决overlapping的问题"><span class="toc-number">7.0.5.</span> <span class="toc-text">解决overlapping的问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#八、plot出图"><span class="toc-number">8.</span> <span class="toc-text">八、plot出图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个Series"><span class="toc-number">8.0.1.</span> <span class="toc-text">创建一个Series</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dataframe-可视化"><span class="toc-number">8.0.2.</span> <span class="toc-text">Dataframe 可视化</span></a></li></ol></li></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/0000.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Python-05Pandas</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-07-15<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-08-12</time><div class="post-meta-wordcount"></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><ul>
<li>基本介绍</li>
<li>选择数据</li>
<li>设置值</li>
<li>处理丢失数据</li>
<li>导入导出</li>
<li>合并concat</li>
<li>合并merge</li>
<li>plot出图</li>
</ul>
<a id="more"></a>

<h1 id="一、基本介绍"><a href="#一、基本介绍" class="headerlink" title="一、基本介绍"></a>一、基本介绍</h1><p>如果用 python 的列表和字典来作比较, 那么可以说 Numpy 是列表形式的，没有数值标签，而 <a href="https://pandas.pydata.org/pandas-docs/stable/" target="_blank" rel="noopener">Pandas</a> 就是字典形式。Pandas是基于Numpy构建的，让Numpy为中心的应用变得更加简单。</p>
<p>要使用pandas，首先需要了解他主要两个数据结构：Series和DataFrame。</p>
<h3 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h3><p>Series的字符串表现形式为：索引在左边，值在右边。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">s = pd.Series([<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,np.nan,<span class="number">44</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">print(s)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">0     1.0</span></span><br><span class="line"><span class="string">1     3.0</span></span><br><span class="line"><span class="string">2     6.0</span></span><br><span class="line"><span class="string">3     NaN</span></span><br><span class="line"><span class="string">4    44.0</span></span><br><span class="line"><span class="string">5     1.0</span></span><br><span class="line"><span class="string">dtype: float64</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>由于我们没有为数据指定索引，于是会自动创建一个0到N-1（N为长度）的整数型索引。</p>
<h3 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h3><p>DataFrame是一个表格型的数据结构，它包含有一组有序的列，每列可以是不同的值类型（数值，字符串，布尔值等）。DataFrame既有行索引也有列索引， 它可以被看做由Series组成的大字典。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dates = pd.date_range(<span class="string">'20160101'</span>,periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">6</span>,<span class="number">4</span>),index=dates,columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line">print(df)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">                   a         b         c         d</span></span><br><span class="line"><span class="string">2016-01-01 -0.253065 -2.071051 -0.640515  0.613663</span></span><br><span class="line"><span class="string">2016-01-02 -1.147178  1.532470  0.989255 -0.499761</span></span><br><span class="line"><span class="string">2016-01-03  1.221656 -2.390171  1.862914  0.778070</span></span><br><span class="line"><span class="string">2016-01-04  1.473877 -0.046419  0.610046  0.204672</span></span><br><span class="line"><span class="string">2016-01-05 -1.584752 -0.700592  1.487264 -1.778293</span></span><br><span class="line"><span class="string">2016-01-06  0.633675 -1.414157 -0.277066 -0.442545</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>可以根据每一个不同的索引来挑选数据, 比如挑选 b 的元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">print(df[<span class="string">'b'</span>])</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">2016-01-01   -2.071051</span></span><br><span class="line"><span class="string">2016-01-02    1.532470</span></span><br><span class="line"><span class="string">2016-01-03   -2.390171</span></span><br><span class="line"><span class="string">2016-01-04   -0.046419</span></span><br><span class="line"><span class="string">2016-01-05   -0.700592</span></span><br><span class="line"><span class="string">2016-01-06   -1.414157</span></span><br><span class="line"><span class="string">Freq: D, Name: b, dtype: float64</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>创建一组没有给定行标签和列标签的数据 df1，它就会采取默认的从0开始 index:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df1 = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)))</span><br><span class="line">print(df1)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   0  1   2   3</span></span><br><span class="line"><span class="string">0  0  1   2   3</span></span><br><span class="line"><span class="string">1  4  5   6   7</span></span><br><span class="line"><span class="string">2  8  9  10  11</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p> 还有一种生成 df 的方法, 如下 df2:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'A'</span> : <span class="number">1.</span>,</span><br><span class="line">                    <span class="string">'B'</span> : pd.Timestamp(<span class="string">'20130102'</span>),</span><br><span class="line">                    <span class="string">'C'</span> : pd.Series(<span class="number">1</span>,index=list(range(<span class="number">4</span>)),dtype=<span class="string">'float32'</span>),</span><br><span class="line">                    <span class="string">'D'</span> : np.array([<span class="number">3</span>] * <span class="number">4</span>,dtype=<span class="string">'int32'</span>),</span><br><span class="line">                    <span class="string">'E'</span> : pd.Categorical([<span class="string">"test"</span>,<span class="string">"train"</span>,<span class="string">"test"</span>,<span class="string">"train"</span>]),</span><br><span class="line">                    <span class="string">'F'</span> : <span class="string">'foo'</span>&#125;)</span><br><span class="line">print(df2)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     A          B    C  D      E    F</span></span><br><span class="line"><span class="string">0  1.0 2013-01-02  1.0  3   test  foo</span></span><br><span class="line"><span class="string">1  1.0 2013-01-02  1.0  3  train  foo</span></span><br><span class="line"><span class="string">2  1.0 2013-01-02  1.0  3   test  foo</span></span><br><span class="line"><span class="string">3  1.0 2013-01-02  1.0  3  train  foo</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>如果想要查看数据中的类型, 我们可以用 dtype 这个属性:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">print(df2.dtypes)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">A           float64</span></span><br><span class="line"><span class="string">B    datetime64[ns]</span></span><br><span class="line"><span class="string">C           float32</span></span><br><span class="line"><span class="string">D             int32</span></span><br><span class="line"><span class="string">E          category</span></span><br><span class="line"><span class="string">F            object</span></span><br><span class="line"><span class="string">dtype: object</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>如果想看对列的序号:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(df2.index)</span><br><span class="line"><span class="comment"># Int64Index([0, 1, 2, 3], dtype='int64')</span></span><br></pre></td></tr></table></figure>

<p>每种数据的名称也能看到:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(df2.columns)</span><br><span class="line"><span class="comment"># Index(['A', 'B', 'C', 'D', 'E', 'F'], dtype='object')</span></span><br></pre></td></tr></table></figure>

<p>如果只想看所有df2的值:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(df2.values)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">array([[1.0, Timestamp('2013-01-02 00:00:00'), 1.0, 3, 'test', 'foo'],</span></span><br><span class="line"><span class="string">       [1.0, Timestamp('2013-01-02 00:00:00'), 1.0, 3, 'train', 'foo'],</span></span><br><span class="line"><span class="string">       [1.0, Timestamp('2013-01-02 00:00:00'), 1.0, 3, 'test', 'foo'],</span></span><br><span class="line"><span class="string">       [1.0, Timestamp('2013-01-02 00:00:00'), 1.0, 3, 'train', 'foo']], dtype=object)</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>想知道数据的总结, 可以用 describe():</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df2.describe()</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">         A    C    D</span></span><br><span class="line"><span class="string">count  4.0  4.0  4.0</span></span><br><span class="line"><span class="string">mean   1.0  1.0  3.0</span></span><br><span class="line"><span class="string">std    0.0  0.0  0.0</span></span><br><span class="line"><span class="string">min    1.0  1.0  3.0</span></span><br><span class="line"><span class="string">25%    1.0  1.0  3.0</span></span><br><span class="line"><span class="string">50%    1.0  1.0  3.0</span></span><br><span class="line"><span class="string">75%    1.0  1.0  3.0</span></span><br><span class="line"><span class="string">max    1.0  1.0  3.0</span></span><br></pre></td></tr></table></figure>

<p>如果想翻转数据, transpose:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">print(df2.T)</span><br><span class="line"><span class="string">"""                   </span></span><br><span class="line"><span class="string">0                    1                    2  \</span></span><br><span class="line"><span class="string">A                    1                    1                    1   </span></span><br><span class="line"><span class="string">B  2013-01-02 00:00:00  2013-01-02 00:00:00  2013-01-02 00:00:00   </span></span><br><span class="line"><span class="string">C                    1                    1                    1   </span></span><br><span class="line"><span class="string">D                    3                    3                    3   </span></span><br><span class="line"><span class="string">E                 test                train                 test   </span></span><br><span class="line"><span class="string">F                  foo                  foo                  foo   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                     3  </span></span><br><span class="line"><span class="string">A                    1  </span></span><br><span class="line"><span class="string">B  2013-01-02 00:00:00  </span></span><br><span class="line"><span class="string">C                    1  </span></span><br><span class="line"><span class="string">D                    3  </span></span><br><span class="line"><span class="string">E                train  </span></span><br><span class="line"><span class="string">F                  foo  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>如果想对数据的 index 进行排序并输出:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按列倒序排序</span></span><br><span class="line">df2.sort_index(axis=<span class="number">1</span>,ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     F      E  D    C          B    A</span></span><br><span class="line"><span class="string">0  foo   test  3  1.0 2013-01-02  1.0</span></span><br><span class="line"><span class="string">1  foo  train  3  1.0 2013-01-02  1.0</span></span><br><span class="line"><span class="string">2  foo   test  3  1.0 2013-01-02  1.0</span></span><br><span class="line"><span class="string">3  foo  train  3  1.0 2013-01-02  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按行倒序排序</span></span><br><span class="line">df2.sort_index(axis=<span class="number">0</span>,ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     A          B    C  D      E    F</span></span><br><span class="line"><span class="string">3  1.0 2013-01-02  1.0  3  train  foo</span></span><br><span class="line"><span class="string">2  1.0 2013-01-02  1.0  3   test  foo</span></span><br><span class="line"><span class="string">1  1.0 2013-01-02  1.0  3  train  foo</span></span><br><span class="line"><span class="string">0  1.0 2013-01-02  1.0  3   test  foo</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>如果是对数据值排序输出:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df2.sort_values(by=<span class="string">'E'</span>)</span><br><span class="line">     A          B    C  D      E    F</span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>   test  foo</span><br><span class="line"><span class="number">2</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>   test  foo</span><br><span class="line"><span class="number">1</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>  train  foo</span><br><span class="line"><span class="number">3</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>  train  foo</span><br></pre></td></tr></table></figure>

<h1 id="二、选择数据"><a href="#二、选择数据" class="headerlink" title="二、选择数据"></a>二、选择数据</h1><p>建立了一个 6X4 的矩阵数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dates = pd.date_range(<span class="string">'20190721'</span>,periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates,columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">df</span></span><br><span class="line"><span class="string">             A   B   C   D</span></span><br><span class="line"><span class="string">2019-07-21   0   1   2   3</span></span><br><span class="line"><span class="string">2019-07-22   4   5   6   7</span></span><br><span class="line"><span class="string">2019-07-23   8   9  10  11</span></span><br><span class="line"><span class="string">2019-07-24  12  13  14  15</span></span><br><span class="line"><span class="string">2019-07-25  16  17  18  19</span></span><br><span class="line"><span class="string">2019-07-26  20  21  22  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="简单的筛选"><a href="#简单的筛选" class="headerlink" title="简单的筛选"></a>简单的筛选</h3><p>如果我们想选取DataFrame中的数据，下面描述了两种途径, 他们都能达到同一个目的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'A'</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">2019-07-21     0</span></span><br><span class="line"><span class="string">2019-07-22     4</span></span><br><span class="line"><span class="string">2019-07-23     8</span></span><br><span class="line"><span class="string">2019-07-24    12</span></span><br><span class="line"><span class="string">2019-07-25    16</span></span><br><span class="line"><span class="string">2019-07-26    20</span></span><br><span class="line"><span class="string">Freq: D, Name: A, dtype: int32</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">df.A</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">2019-07-21     0</span></span><br><span class="line"><span class="string">2019-07-22     4</span></span><br><span class="line"><span class="string">2019-07-23     8</span></span><br><span class="line"><span class="string">2019-07-24    12</span></span><br><span class="line"><span class="string">2019-07-25    16</span></span><br><span class="line"><span class="string">2019-07-26    20</span></span><br><span class="line"><span class="string">Freq: D, Name: A, dtype: int32</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>让选择跨越多行或多列:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A  B   C   D</span></span><br><span class="line"><span class="string">2019-07-21  0  1   2   3</span></span><br><span class="line"><span class="string">2019-07-22  4  5   6   7</span></span><br><span class="line"><span class="string">2019-07-23  8  9  10  11</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment"># 选择20190722到20190725标签之间的数据，并且包括这两个标签</span></span><br><span class="line">df[<span class="string">'20190722'</span>:<span class="string">'20190725'</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B   C   D</span></span><br><span class="line"><span class="string">2019-07-22   4   5   6   7</span></span><br><span class="line"><span class="string">2019-07-23   8   9  10  11</span></span><br><span class="line"><span class="string">2019-07-24  12  13  14  15</span></span><br><span class="line"><span class="string">2019-07-25  16  17  18  19</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="根据标签-loc"><a href="#根据标签-loc" class="headerlink" title="根据标签 loc"></a>根据标签 loc</h3><p>使用<code>loc</code>通过标签名字选择某一行数据，或者通过选择某行或者所有行（:代表所有行）然后选其中某一列或几列数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">df.loc[<span class="string">'20190722'</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">A    4</span></span><br><span class="line"><span class="string">B    5</span></span><br><span class="line"><span class="string">C    6</span></span><br><span class="line"><span class="string">D    7</span></span><br><span class="line"><span class="string">Name: 2019-07-22 00:00:00, dtype: int32</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">df.loc[:,[<span class="string">'A'</span>,<span class="string">'B'</span>]]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B</span></span><br><span class="line"><span class="string">2019-07-21   0   1</span></span><br><span class="line"><span class="string">2019-07-22   4   5</span></span><br><span class="line"><span class="string">2019-07-23   8   9</span></span><br><span class="line"><span class="string">2019-07-24  12  13</span></span><br><span class="line"><span class="string">2019-07-25  16  17</span></span><br><span class="line"><span class="string">2019-07-26  20  21</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="根据序列-iloc"><a href="#根据序列-iloc" class="headerlink" title="根据序列 iloc"></a>根据序列 iloc</h3><p>使用<code>iloc</code>通过位置选择在不同情况下所需要的数据。例如选某一个，连续选或者跨行选等操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[<span class="number">3</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">A    12</span></span><br><span class="line"><span class="string">B    13</span></span><br><span class="line"><span class="string">C    14</span></span><br><span class="line"><span class="string">D    15</span></span><br><span class="line"><span class="string">Name: 2019-07-24 00:00:00, dtype: int32</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">df.iloc[<span class="number">3</span>,<span class="number">1</span>] <span class="comment"># 13</span></span><br><span class="line">df.iloc[<span class="number">3</span>:<span class="number">5</span>,<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B   C</span></span><br><span class="line"><span class="string">2019-07-24  12  13  14</span></span><br><span class="line"><span class="string">2019-07-25  16  17  18</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">df.iloc[[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B   C</span></span><br><span class="line"><span class="string">2019-07-22   4   5   6</span></span><br><span class="line"><span class="string">2019-07-24  12  13  14</span></span><br><span class="line"><span class="string">2019-07-26  20  21  22</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="混合选择-ix"><a href="#混合选择-ix" class="headerlink" title="混合选择 ix"></a>混合选择 ix</h3><p>可以采用混合选择<code>ix</code>, 其中选择’A’和’C’的两列，并选择前三行的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.ix[:<span class="number">3</span>,[<span class="string">'A'</span>,<span class="string">'C'</span>]]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A   C</span></span><br><span class="line"><span class="string">2019-07-21  0   2</span></span><br><span class="line"><span class="string">2019-07-22  4   6</span></span><br><span class="line"><span class="string">2019-07-23  8  10</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="通过判断的筛选"><a href="#通过判断的筛选" class="headerlink" title="通过判断的筛选"></a>通过判断的筛选</h3><p>可以采用判断指令 (Boolean indexing)约束某项条件然后选择出当前所有数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df[df.A&gt;<span class="number">8</span>]</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B   C   D</span></span><br><span class="line"><span class="string">2019-07-24  12  13  14  15</span></span><br><span class="line"><span class="string">2019-07-25  16  17  18  19</span></span><br><span class="line"><span class="string">2019-07-26  20  21  22  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h1 id="三、设置值"><a href="#三、设置值" class="headerlink" title="三、设置值"></a>三、设置值</h1><h3 id="创建数据"><a href="#创建数据" class="headerlink" title="创建数据"></a>创建数据</h3><p>首先建立了一个 6X4 的矩阵数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dates = pd.date_range(<span class="string">'20130101'</span>, periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates, columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A   B   C   D</span></span><br><span class="line"><span class="string">2013-01-01   0   1   2   3</span></span><br><span class="line"><span class="string">2013-01-02   4   5   6   7</span></span><br><span class="line"><span class="string">2013-01-03   8   9  10  11</span></span><br><span class="line"><span class="string">2013-01-04  12  13  14  15</span></span><br><span class="line"><span class="string">2013-01-05  16  17  18  19</span></span><br><span class="line"><span class="string">2013-01-06  20  21  22  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>根据位置设置 loc 和 iloc<br>我们可以利用索引或者标签确定需要修改值的位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df.iloc[<span class="number">2</span>,<span class="number">2</span>] = <span class="number">1111</span></span><br><span class="line">df.loc[<span class="string">'20130101'</span>,<span class="string">'B'</span>] = <span class="number">2222</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A     B     C   D</span></span><br><span class="line"><span class="string">2013-01-01   0  2222     2   3</span></span><br><span class="line"><span class="string">2013-01-02   4     5     6   7</span></span><br><span class="line"><span class="string">2013-01-03   8     9  1111  11</span></span><br><span class="line"><span class="string">2013-01-04  12    13    14  15</span></span><br><span class="line"><span class="string">2013-01-05  16    17    18  19</span></span><br><span class="line"><span class="string">2013-01-06  20    21    22  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="根据条件设置"><a href="#根据条件设置" class="headerlink" title="根据条件设置"></a>根据条件设置</h3><p>如果现在的判断条件是这样, 对于A大于4的行，更改df在相应行上的所有数为9999。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df[df.A&gt;<span class="number">4</span>] = <span class="number">9999</span></span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">               A     B     C     D</span></span><br><span class="line"><span class="string">2019-07-21     0     1     2     3</span></span><br><span class="line"><span class="string">2019-07-22     4  2222     6     7</span></span><br><span class="line"><span class="string">2019-07-23  9999  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-24  9999  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-25  9999  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-26  9999  9999  9999  9999</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>将A列中所有大于9998的值都改为9：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df.A[df.A&gt;<span class="number">9998</span>]=<span class="number">9</span></span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A     B     C     D</span></span><br><span class="line"><span class="string">2019-07-21  0     1     2     3</span></span><br><span class="line"><span class="string">2019-07-22  4  2222     6     7</span></span><br><span class="line"><span class="string">2019-07-23  9  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-24  9  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-25  9  9999  9999  9999</span></span><br><span class="line"><span class="string">2019-07-26  9  9999  9999  9999</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>对于A大于8的位置，更改B在相应位置上的数为9。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df.B[df.A&gt;<span class="number">8</span>]=<span class="number">9</span></span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A     B     C     D</span></span><br><span class="line"><span class="string">2019-07-21  0     1     2     3</span></span><br><span class="line"><span class="string">2019-07-22  4  2222     6     7</span></span><br><span class="line"><span class="string">2019-07-23  9     9  9999  9999</span></span><br><span class="line"><span class="string">2019-07-24  9     9  9999  9999</span></span><br><span class="line"><span class="string">2019-07-25  9     9  9999  9999</span></span><br><span class="line"><span class="string">2019-07-26  9     9  9999  9999</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="按行或列设置"><a href="#按行或列设置" class="headerlink" title="按行或列设置"></a>按行或列设置</h3><p>如果对整列做批处理, 加上一列 ‘F’, 并将 F 列全改为 NaN, 如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'F'</span>]=np.nan</span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A     B     C     D   F</span></span><br><span class="line"><span class="string">2019-07-21  0     1     2     3 NaN</span></span><br><span class="line"><span class="string">2019-07-22  4  2222     6     7 NaN</span></span><br><span class="line"><span class="string">2019-07-23  9     9  9999  9999 NaN</span></span><br><span class="line"><span class="string">2019-07-24  9     9  9999  9999 NaN</span></span><br><span class="line"><span class="string">2019-07-25  9     9  9999  9999 NaN</span></span><br><span class="line"><span class="string">2019-07-26  9     9  9999  9999 NaN</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><p>用上面的方法也可以加上 Series 序列（但是长度必须对齐）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'E'</span>]=pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],index=pd.date_range(<span class="string">'20190721'</span>,periods=<span class="number">6</span>))</span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            A     B     C     D   F  E</span></span><br><span class="line"><span class="string">2019-07-21  0     1     2     3 NaN  1</span></span><br><span class="line"><span class="string">2019-07-22  4  2222     6     7 NaN  2</span></span><br><span class="line"><span class="string">2019-07-23  9     9  9999  9999 NaN  3</span></span><br><span class="line"><span class="string">2019-07-24  9     9  9999  9999 NaN  4</span></span><br><span class="line"><span class="string">2019-07-25  9     9  9999  9999 NaN  5</span></span><br><span class="line"><span class="string">2019-07-26  9     9  9999  9999 NaN  6</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h1 id="四、处理丢失数据"><a href="#四、处理丢失数据" class="headerlink" title="四、处理丢失数据"></a>四、处理丢失数据</h1><h3 id="创建含-NaN-的矩阵"><a href="#创建含-NaN-的矩阵" class="headerlink" title="创建含 NaN 的矩阵"></a>创建含 NaN 的矩阵</h3><p>有时候我们导入或处理数据, 会产生一些空的或者是 NaN 数据。建立一个6X4的矩阵数据并且把两个位置置为空。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates,columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line">df.iloc[<span class="number">0</span>,<span class="number">1</span>] = np.nan</span><br><span class="line">df.iloc[<span class="number">1</span>,<span class="number">2</span>] = np.nan</span><br><span class="line">df</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A     B     C   D</span></span><br><span class="line"><span class="string">2013-01-01   0   NaN   2.0   3</span></span><br><span class="line"><span class="string">2013-01-02   4   5.0   NaN   7</span></span><br><span class="line"><span class="string">2013-01-03   8   9.0  10.0  11</span></span><br><span class="line"><span class="string">2013-01-04  12  13.0  14.0  15</span></span><br><span class="line"><span class="string">2013-01-05  16  17.0  18.0  19</span></span><br><span class="line"><span class="string">2013-01-06  20  21.0  22.0  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="pd-dropna"><a href="#pd-dropna" class="headerlink" title="pd.dropna()"></a>pd.dropna()</h3><p>如果想直接去掉有 NaN 的行或列, 可以使用 dropna：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df.dropna(</span><br><span class="line">    axis=<span class="number">0</span>,     <span class="comment"># 0: 对行进行操作; 1: 对列进行操作</span></span><br><span class="line">    how=<span class="string">'any'</span>   <span class="comment"># 'any': 只要存在 NaN 就 drop 掉; 'all': 必须全部是 NaN 才 drop </span></span><br><span class="line">    )</span><br><span class="line"><span class="string">"""    </span></span><br><span class="line"><span class="string">             A     B     C   D</span></span><br><span class="line"><span class="string">2013-01-03   8   9.0  10.0  11</span></span><br><span class="line"><span class="string">2013-01-04  12  13.0  14.0  15</span></span><br><span class="line"><span class="string">2013-01-05  16  17.0  18.0  19</span></span><br><span class="line"><span class="string">2013-01-06  20  21.0  22.0  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="pd-fillna"><a href="#pd-fillna" class="headerlink" title="pd.fillna()"></a>pd.fillna()</h3><p>如果是将 NaN 的值用其他值代替, 比如代替成 0:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df.fillna(value=<span class="number">0</span>)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">             A     B     C   D</span></span><br><span class="line"><span class="string">2013-01-01   0   0.0   2.0   3</span></span><br><span class="line"><span class="string">2013-01-02   4   5.0   0.0   7</span></span><br><span class="line"><span class="string">2013-01-03   8   9.0  10.0  11</span></span><br><span class="line"><span class="string">2013-01-04  12  13.0  14.0  15</span></span><br><span class="line"><span class="string">2013-01-05  16  17.0  18.0  19</span></span><br><span class="line"><span class="string">2013-01-06  20  21.0  22.0  23</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="pd-isnull"><a href="#pd-isnull" class="headerlink" title="pd.isnull()"></a>pd.isnull()</h3><p>判断是否有缺失数据 NaN, 为 True 表示缺失数据:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df.isnull()</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">                A      B      C      D</span></span><br><span class="line"><span class="string">2013-01-01  False   True  False  False</span></span><br><span class="line"><span class="string">2013-01-02  False  False   True  False</span></span><br><span class="line"><span class="string">2013-01-03  False  False  False  False</span></span><br><span class="line"><span class="string">2013-01-04  False  False  False  False</span></span><br><span class="line"><span class="string">2013-01-05  False  False  False  False</span></span><br><span class="line"><span class="string">2013-01-06  False  False  False  False</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>检测在数据中是否存在 NaN, 如果存在就返回 True:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.any(df.isnull()) == <span class="literal">True</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<h1 id="五、导入导出"><a href="#五、导入导出" class="headerlink" title="五、导入导出"></a>五、导入导出</h1><p>pandas可以读取与存取的资料格式有很多种，像csv、excel、json、html与pickle等…，详细请看<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html" target="_blank" rel="noopener">官方说明文件</a></p>
<h3 id="读取csv"><a href="#读取csv" class="headerlink" title="读取csv"></a>读取csv</h3><p>示范档案下载 - <a href="https://github.com/MorvanZhou/tutorials/blob/master/numpy%26pandas/15_read_to/student.csv" target="_blank" rel="noopener">student.csv</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment">#加载模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取csv</span></span><br><span class="line">data = pd.read_csv(<span class="string">'D:\B\hexo\source\_posts\student.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印出data</span></span><br><span class="line">print(data)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> Student ID  name    age  gender</span></span><br><span class="line"><span class="string">0       1100.0  Kelly  22.0  Female</span></span><br><span class="line"><span class="string">1       1101.0    Clo  21.0  Female</span></span><br><span class="line"><span class="string">2       1102.0  Tilly  22.0  Female</span></span><br><span class="line"><span class="string">3       1103.0   Tony  24.0    Male</span></span><br><span class="line"><span class="string">4       1104.0  David  20.0    Male</span></span><br><span class="line"><span class="string">5       1105.0  Catty  22.0  Female</span></span><br><span class="line"><span class="string">6       1106.0      M   3.0  Female</span></span><br><span class="line"><span class="string">7       1107.0      N  43.0    Male</span></span><br><span class="line"><span class="string">8       1108.0      A  13.0    Male</span></span><br><span class="line"><span class="string">9       1109.0      S  12.0    Male</span></span><br><span class="line"><span class="string">10      1110.0  David  33.0    Male</span></span><br><span class="line"><span class="string">11      1111.0     Dw   3.0  Female</span></span><br><span class="line"><span class="string">12      1112.0      Q  23.0    Male</span></span><br><span class="line"><span class="string">13      1113.0      W  21.0  Female</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="将资料存取成其他格式"><a href="#将资料存取成其他格式" class="headerlink" title="将资料存取成其他格式"></a>将资料存取成其他格式</h3><p>比如保存成pickle文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_pickle(<span class="string">"D:\B\hexo\source\_posts\student.pickle"</span>)</span><br></pre></td></tr></table></figure>

<p>就可以看到文件夹下产生了一个pickle文件：<br><img alt="img1" data-src="/images/python/5.1.png" class="lazyload"></p>
<h1 id="六、合并-concat"><a href="#六、合并-concat" class="headerlink" title="六、合并 concat"></a>六、合并 concat</h1><p>使用 concat是一种基本的合并方式.而且concat中有很多参数可以调整,合并成你想要的数据形式。</p>
<h3 id="axis-合并方向"><a href="#axis-合并方向" class="headerlink" title="axis(合并方向)"></a>axis(合并方向)</h3><p>axis=0是预设值，因此未设定任何参数时，函数默认axis=0，即按行合并（纵向）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义数据集</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df3 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">2</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#concat纵向合并</span></span><br><span class="line">res = pd.concat([df1, df2, df3], axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印结果</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    a    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">0  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">1  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">2  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">0  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">1  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">2  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="ignore-index-重置-index"><a href="#ignore-index-重置-index" class="headerlink" title="ignore_index(重置 index)"></a>ignore_index(重置 index)</h3><p>仔细观察会发现结果的index是0, 1, 2, 0, 1, 2, 0, 1, 2，若要将index重置，需要加上参数ignore_index (重置 index)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#承上一个例子，并将index_ignore设定为True</span></span><br><span class="line">res = pd.concat([df1, df2, df3], axis=<span class="number">0</span>, ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印结果</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    a    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">5  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">6  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">7  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">8  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>结果的index变0, 1, 2, 3, 4, 5, 6, 7, 8。</p>
<h3 id="join-合并方式"><a href="#join-合并方式" class="headerlink" title="join(合并方式)"></a>join(合并方式)</h3><p>join=’outer’为预设值，因此未设定任何参数时，函数默认join=’outer’。此方式是依照column来做纵向合并，有相同的column上下合并在一起，其他独自的column个自成列，原本没有值的位置皆以NaN填充。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义资料集</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>], index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#纵向"外"合并df1与df2</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'outer'</span>)</span><br><span class="line"></span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    a    b    c    d    e</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0  NaN</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0  NaN</span></span><br><span class="line"><span class="string">3  0.0  0.0  0.0  0.0  NaN</span></span><br><span class="line"><span class="string">2  NaN  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">3  NaN  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  NaN  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<p>承上一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#纵向"内"合并df1与df2</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'inner'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印结果</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    b    c    d</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">3  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重置index并打印结果</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'inner'</span>, ignore_index=<span class="literal">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">5  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="join-axes-依照-axes-合并"><a href="#join-axes-依照-axes-合并" class="headerlink" title="join_axes(依照 axes 合并)"></a>join_axes(依照 axes 合并)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义数据集</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>], index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#依照`df1.index`进行横向合并</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">1</span>, join_axes=[df1.index])</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印结果</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">a    b    c    d    b    c    d    e</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0  NaN  NaN  NaN  NaN</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">3  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="append-添加数据"><a href="#append-添加数据" class="headerlink" title="append(添加数据)"></a>append(添加数据)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义数据集</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>], index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">df3 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">2</span>,columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将df2合并到df1的下面，以及重置index，并打印出结果</span></span><br><span class="line">res = df1.append(df2,ignore_index=<span class="literal">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    a    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">5  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并多个df，将df2与df3合并至df1的下面，以及重置index，并打印出结果</span></span><br><span class="line">res = df1.append([df2,df3],ignore_index=<span class="literal">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     a    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">4  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">5  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="string">6  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">7  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">8  2.0  2.0  2.0  2.0</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并series，将s1合并至df1，以及重置index，并打印出结果</span></span><br><span class="line">s1 = pd.Series([<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>],ignore_index+<span class="literal">True</span>)</span><br><span class="line">s1 = pd.Series([<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>],index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">res = df1.append(s1,ignore_index=<span class="literal">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     a    b    c    d</span></span><br><span class="line"><span class="string">0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="string">3  3.0  3.0  3.0  3.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h1 id="七、合并merge"><a href="#七、合并merge" class="headerlink" title="七、合并merge"></a>七、合并merge</h1><p>pandas中的merge和concat类似,但主要是用于两组有key column的数据,统一索引的数据. 通常也被用在Database的处理当中。</p>
<h3 id="依据一组key合并"><a href="#依据一组key合并" class="headerlink" title="依据一组key合并"></a>依据一组key合并</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义资料集并打印出</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>],</span><br><span class="line">                             <span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>, <span class="string">'A3'</span>],</span><br><span class="line">                             <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'B3'</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>],</span><br><span class="line">                              <span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                              <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D1'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;)</span><br><span class="line"></span><br><span class="line">print(left)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">key1 key2   A   B</span></span><br><span class="line"><span class="string">0   K0   K0  A0  B0</span></span><br><span class="line"><span class="string">1   K0   K1  A1  B1</span></span><br><span class="line"><span class="string">2   K1   K0  A2  B2</span></span><br><span class="line"><span class="string">3   K2   K1  A3  B3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">print(right)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">key1 key2   C   D</span></span><br><span class="line"><span class="string">0   K0   K0  C0  D0</span></span><br><span class="line"><span class="string">1   K1   K0  C1  D1</span></span><br><span class="line"><span class="string">2   K1   K0  C2  D2</span></span><br><span class="line"><span class="string">3   K2   K0  C3  D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依据key column合并，并打印出</span></span><br><span class="line">res = pd.merge(left,right,on=<span class="string">'key'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key   A   B   C   D</span></span><br><span class="line"><span class="string">0  K0  A0  B0  C0  D0</span></span><br><span class="line"><span class="string">1  K0  A1  B1  C0  D0</span></span><br><span class="line"><span class="string">2  K1  A2  B2  C1  D1</span></span><br><span class="line"><span class="string">3  K1  A2  B2  C2  D2</span></span><br><span class="line"><span class="string">4  K2  A3  B3  C3  D3</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="依据两组key合并"><a href="#依据两组key合并" class="headerlink" title="依据两组key合并"></a>依据两组key合并</h3><p>合并时有4种方法how = [‘left’, ‘right’, ‘outer’, ‘inner’]，预设值how=’inner’。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">left = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>],</span><br><span class="line">		     <span class="string">'key2'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K0'</span>, <span class="string">'K1'</span>],</span><br><span class="line">                      <span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>, <span class="string">'A3'</span>],</span><br><span class="line">                      <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'B3'</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>],</span><br><span class="line">                       <span class="string">'key2'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K0'</span>],</span><br><span class="line">                       <span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                       <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D1'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;)</span><br><span class="line">left</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2   A   B</span></span><br><span class="line"><span class="string">0   K0   K0  A0  B0</span></span><br><span class="line"><span class="string">1   K0   K1  A1  B1</span></span><br><span class="line"><span class="string">2   K1   K0  A2  B2</span></span><br><span class="line"><span class="string">3   K2   K1  A3  B3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">right</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2   C   D</span></span><br><span class="line"><span class="string">0   K0   K0  C0  D0</span></span><br><span class="line"><span class="string">1   K1   K0  C1  D1</span></span><br><span class="line"><span class="string">2   K1   K0  C2  D2</span></span><br><span class="line"><span class="string">3   K2   K0  C3  D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">res = pd.merge(left,right,on=[<span class="string">'key1'</span>,<span class="string">'key2'</span>])</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2   A   B   C   D</span></span><br><span class="line"><span class="string">0   K0   K0  A0  B0  C0  D0</span></span><br><span class="line"><span class="string">1   K1   K0  A2  B2  C1  D1</span></span><br><span class="line"><span class="string">2   K1   K0  A2  B2  C2  D2</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依据key1与key2 columns进行合并，并打印出四种结果['left', 'right', 'outer', 'inner']</span></span><br><span class="line">res = pd.merge(left,right,on=[<span class="string">'key1'</span>,<span class="string">'key2'</span>],how=<span class="string">'inner'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2   A   B   C   D</span></span><br><span class="line"><span class="string">0   K0   K0  A0  B0  C0  D0</span></span><br><span class="line"><span class="string">1   K1   K0  A2  B2  C1  D1</span></span><br><span class="line"><span class="string">2   K1   K0  A2  B2  C2  D2</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left,right,on=[<span class="string">'key1'</span>,<span class="string">'key2'</span>],how=<span class="string">'outer'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2    A    B    C    D</span></span><br><span class="line"><span class="string">0   K0   K0   A0   B0   C0   D0</span></span><br><span class="line"><span class="string">1   K0   K1   A1   B1  NaN  NaN</span></span><br><span class="line"><span class="string">2   K1   K0   A2   B2   C1   D1</span></span><br><span class="line"><span class="string">3   K1   K0   A2   B2   C2   D2</span></span><br><span class="line"><span class="string">4   K2   K1   A3   B3  NaN  NaN</span></span><br><span class="line"><span class="string">5   K2   K0  NaN  NaN   C3   D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left,right,on=[<span class="string">'key1'</span>,<span class="string">'key2'</span>],how=<span class="string">'right'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2    A    B   C   D</span></span><br><span class="line"><span class="string">0   K0   K0   A0   B0  C0  D0</span></span><br><span class="line"><span class="string">1   K1   K0   A2   B2  C1  D1</span></span><br><span class="line"><span class="string">2   K1   K0   A2   B2  C2  D2</span></span><br><span class="line"><span class="string">3   K2   K0  NaN  NaN  C3  D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left,right,on=[<span class="string">'key1'</span>,<span class="string">'key2'</span>],how=<span class="string">'left'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">  key1 key2   A   B    C    D</span></span><br><span class="line"><span class="string">0   K0   K0  A0  B0   C0   D0</span></span><br><span class="line"><span class="string">1   K0   K1  A1  B1  NaN  NaN</span></span><br><span class="line"><span class="string">2   K1   K0  A2  B2   C1   D1</span></span><br><span class="line"><span class="string">3   K1   K0  A2  B2   C2   D2</span></span><br><span class="line"><span class="string">4   K2   K1  A3  B3  NaN  NaN</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="Indicator"><a href="#Indicator" class="headerlink" title="Indicator"></a>Indicator</h3><p>indicator=True会将合并的记录放在新的一列。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'col1'</span>:[<span class="number">0</span>,<span class="number">1</span>], <span class="string">'col_left'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'col1'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>],<span class="string">'col_right'</span>:[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]&#125;)</span><br><span class="line"></span><br><span class="line">df1</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   col1 col_left</span></span><br><span class="line"><span class="string">0     0        a</span></span><br><span class="line"><span class="string">1     1        b</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">df2</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   col1  col_right</span></span><br><span class="line"><span class="string">0     1          2</span></span><br><span class="line"><span class="string">1     2          2</span></span><br><span class="line"><span class="string">2     2          2</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依据col1进行合并，并启用indicator=True，最后打印出</span></span><br><span class="line">res = pd.merge(df1, df2, on=<span class="string">'col1'</span>, how=<span class="string">'outer'</span>, indicator=<span class="literal">True</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   col1 col_left  col_right      _merge</span></span><br><span class="line"><span class="string">0     0        a        NaN   left_only</span></span><br><span class="line"><span class="string">1     1        b        2.0        both</span></span><br><span class="line"><span class="string">2     2      NaN        2.0  right_only</span></span><br><span class="line"><span class="string">3     2      NaN        2.0  right_only</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment"># 自定indicator column的名称，并打印出</span></span><br><span class="line">res = pd.merge(df1, df2, on=<span class="string">'col1'</span>, how=<span class="string">'outer'</span>, indicator=<span class="string">'indicator_column'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   col1 col_left  col_right indicator_column</span></span><br><span class="line"><span class="string">0     0        a        NaN        left_only</span></span><br><span class="line"><span class="string">1     1        b        2.0             both</span></span><br><span class="line"><span class="string">2     2      NaN        2.0       right_only</span></span><br><span class="line"><span class="string">3     2      NaN        2.0       right_only</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="依据index合并"><a href="#依据index合并" class="headerlink" title="依据index合并"></a>依据index合并</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">left = pd.DataFrame(&#123;<span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>],</span><br><span class="line">                     <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>]&#125;,</span><br><span class="line">                     index=[<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>])</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                      <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;,</span><br><span class="line">                     index=[<span class="string">'K0'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>])</span><br><span class="line"></span><br><span class="line">left</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     A   B</span></span><br><span class="line"><span class="string">K0  A0  B0</span></span><br><span class="line"><span class="string">K1  A1  B1</span></span><br><span class="line"><span class="string">K2  A2  B2</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">right</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     C   D</span></span><br><span class="line"><span class="string">K0  C0  D0</span></span><br><span class="line"><span class="string">K2  C2  D2</span></span><br><span class="line"><span class="string">K3  C3  D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依据左右资料集的index进行合并，how='outer',并打印出</span></span><br><span class="line">res = pd.merge(left, right, left_index=<span class="literal">True</span>, right_index=<span class="literal">True</span>, how=<span class="string">'outer'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">      A    B    C    D</span></span><br><span class="line"><span class="string">K0   A0   B0   C0   D0</span></span><br><span class="line"><span class="string">K1   A1   B1  NaN  NaN</span></span><br><span class="line"><span class="string">K2   A2   B2   C2   D2</span></span><br><span class="line"><span class="string">K3  NaN  NaN   C3   D3</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依据左右资料集的index进行合并，how='inner',并打印出</span></span><br><span class="line">res = pd.merge(left, right, left_index=<span class="literal">True</span>, right_index=<span class="literal">True</span>, how=<span class="string">'inner'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">     A   B   C   D</span></span><br><span class="line"><span class="string">K0  A0  B0  C0  D0</span></span><br><span class="line"><span class="string">K2  A2  B2  C2  D2</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h3 id="解决overlapping的问题"><a href="#解决overlapping的问题" class="headerlink" title="解决overlapping的问题"></a>解决overlapping的问题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">boys = pd.DataFrame(&#123;<span class="string">'k'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>], <span class="string">'age'</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">girls = pd.DataFrame(&#123;<span class="string">'k'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K3'</span>], <span class="string">'age'</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用suffixes解决overlapping的问题，分清楚age来自哪个DataFrame</span></span><br><span class="line">res = pd.merge(boys, girls, on=<span class="string">'k'</span>, suffixes=[<span class="string">'_boy'</span>, <span class="string">'_girl'</span>], how=<span class="string">'inner'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    k  age_boy  age_girl</span></span><br><span class="line"><span class="string">0  K0        1         4</span></span><br><span class="line"><span class="string">1  K0        1         5</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(boys, girls, on=<span class="string">'k'</span>, suffixes=[<span class="string">'_boy'</span>, <span class="string">'_girl'</span>], how=<span class="string">'outer'</span>)</span><br><span class="line">res</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    k  age_boy  age_girl</span></span><br><span class="line"><span class="string">0  K0      1.0       4.0</span></span><br><span class="line"><span class="string">1  K0      1.0       5.0</span></span><br><span class="line"><span class="string">2  K1      2.0       NaN</span></span><br><span class="line"><span class="string">3  K2      3.0       NaN</span></span><br><span class="line"><span class="string">4  K3      NaN       6.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>

<h1 id="八、plot出图"><a href="#八、plot出图" class="headerlink" title="八、plot出图"></a>八、plot出图</h1><h3 id="创建一个Series"><a href="#创建一个Series" class="headerlink" title="创建一个Series"></a>创建一个Series</h3><p>这是一个线性的数据，我们随机生成1000个数据，Series 默认的 index 就是从0开始的整数，但是这里我显式赋值以便让大家看的更清楚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随机生成1000个数据</span></span><br><span class="line">data = pd.Series(np.random.randn(<span class="number">1000</span>),index=np.arange(<span class="number">1000</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 为了方便观看效果, 我们累加这个数据</span></span><br><span class="line">data.cumsum()</span><br><span class="line"></span><br><span class="line"><span class="comment"># pandas 数据可以直接观看其可视化形式</span></span><br><span class="line">data.plot()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>就这么简单，熟悉 matplotlib 的朋友知道如果需要plot一个数据，我们可以使用 plt.plot(x=, y=)，把x,y的数据作为参数存进去，但是data本来就是一个数据，所以我们可以直接plot。 生成的结果就是下图：<br><img alt="img2" data-src="/images/python/5.2.png" class="lazyload"></p>
<h3 id="Dataframe-可视化"><a href="#Dataframe-可视化" class="headerlink" title="Dataframe 可视化"></a>Dataframe 可视化</h3><p>我们生成一个1000*4 的DataFrame，并对他们累加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data = pd.DataFrame(</span><br><span class="line">    np.random.randn(<span class="number">1000</span>,<span class="number">4</span>),</span><br><span class="line">    index=np.arange(<span class="number">1000</span>),</span><br><span class="line">    columns=list(<span class="string">"ABCD"</span>)</span><br><span class="line">    )</span><br><span class="line">data.cumsum()</span><br><span class="line">data.plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img alt="img3" data-src="/images/python/5.3.png" class="lazyload"><br>这个就是我们刚刚生成的4个column的数据，因为有4组数据，所以4组数据会分别plot出来。plot 可以指定很多参数，具体的用法大家可以自己查一下<a href="http://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html" target="_blank" rel="noopener">这里</a></p>
<p>除了plot，我经常会用到还有scatter，这个会显示散点图，首先给大家说一下在 pandas 中有多少种方法</p>
<ul>
<li>bar</li>
<li>hist</li>
<li>box</li>
<li>kde</li>
<li>area</li>
<li>scatter</li>
<li>hexbin<br>但是我们今天不会一一介绍，主要说一下 plot 和 scatter. 因为scatter只有x，y两个属性，我们我们就可以分别给x, y指定数据<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = data.plot.scatter(x=<span class="string">'A'</span>,y=<span class="string">'B'</span>,color=<span class="string">'DarkBlue'</span>,label=<span class="string">'Class1'</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>然后我们在可以再画一个在同一个ax上面，选择不一样的数据列，不同的 color 和 label</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将之下这个 data 画在上一个 ax 上面</span></span><br><span class="line">data.plot.scatter(x=<span class="string">'A'</span>,y=<span class="string">'C'</span>,color=<span class="string">'LightGreen'</span>,label=<span class="string">'Class2'</span>,ax=ax)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>下面就是我plot出来的图片<br><img alt="img4" data-src="/images/python/5.4.png" class="lazyload"></p>
<p>本节参考自莫烦python，学习请点击：<a href="https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">PalmLand</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://palmland.github.io/2019/07/15/python-05Pandas/">https://palmland.github.io/2019/07/15/python-05Pandas/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python    </a></div><div class="post_share"><div class="social-share" data-image="/img/0000.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/07/16/python-06Matplotlib/"><img class="prev_cover lazyload" data-src="/images/cover/0210.jpg" onerror="onerror=null;src='/img/0000.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Python-06Matplotlib</span></div></a></div><div class="next-post pull_right"><a href="/2019/07/14/python-04Numpy/"><img class="next_cover lazyload" data-src="/img/0000.jpg" onerror="onerror=null;src='/img/0000.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Python-04Numpy</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/07/16/python-06Matplotlib/" title="Python-06Matplotlib"><img class="relatedPosts_cover lazyload" data-src="/images/cover/0210.jpg"><div class="relatedPosts_title">Python-06Matplotlib</div></a></div><div class="relatedPosts_item"><a href="/2019/05/26/python-02函数/" title="Python-02函数"><img class="relatedPosts_cover lazyload" data-src="/img/0000.jpg"><div class="relatedPosts_title">Python-02函数</div></a></div><div class="relatedPosts_item"><a href="/2019/07/11/python-03高级特性/" title="Python-03高级特性"><img class="relatedPosts_cover lazyload" data-src="/img/0000.jpg"><div class="relatedPosts_title">Python-03高级特性</div></a></div><div class="relatedPosts_item"><a href="/2019/05/24/python-01基础/" title="Python-01基础"><img class="relatedPosts_cover lazyload" data-src="/img/0000.jpg"><div class="relatedPosts_title">Python-01基础</div></a></div><div class="relatedPosts_item"><a href="/2019/07/14/python-04Numpy/" title="Python-04Numpy"><img class="relatedPosts_cover lazyload" data-src="/img/0000.jpg"><div class="relatedPosts_title">Python-04Numpy</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 By PalmLand</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="/js/search/local-search.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>